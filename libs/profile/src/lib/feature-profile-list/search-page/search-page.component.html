<app-profile-filters></app-profile-filters>

<!--<div class="profile-card__wrapper" waIntersectionObserver waIntersectionThreshold="0.8">-->
<!--  @for (profile of profiles(); track profile.id; let last = $last) {-->

<!--    <app-profile-card-->
<!--      (waIntersectionObservee)="last ? onIntersection($event) : null"-->
<!--      [profile]="profile"></app-profile-card>-->
<!--  }-->
<!--</div>-->

<div
  class="profile-card__wrapper"
  infiniteScroll
  [infiniteScrollDistance]="2"
  [infiniteScrollThrottle]="50"
  [infiniteScrollContainer]="'.profile-card__wrapper'"
  (scrolled)="onScroll()"
  [fromRoot]="true"
>
  @for (profile of profiles(); track profile.id) {

    <app-profile-card
      [profile]="profile"
    ></app-profile-card>
  }
</div>

<!--@if (last) {-->
<!--  @defer (on viewport) {-->
<!--    <tt-infinite-scroll-trigger-->
<!--      (loaded)="timeToFetch()"-->
<!--    ></tt-infinite-scroll-trigger>-->
<!--  } @placeholder {-->
<!--    <div></div>-->
<!--  }-->
<!--}-->

